=== PDF Invoice Japan for WooCommerce ===
Contributors: Katsushi Kawamori, yamasakidaisuke
Donate link: https://shop-jp.riverforest-wp.info/donate/
Tags: invoice, japan, woocommerce
Requires at least: 4.7
Requires PHP: 8.0
Tested up to: 6.6
Stable tag: 2.06
License: GPLv2 or later
License URI: http://www.gnu.org/licenses/gpl-2.0.html

When an order is received in WooCommerce, a PDF invoice for Japan is generated and sent by email.

== Description ==

When an order is received in WooCommerce, a PDF invoice for Japan is generated and sent by email.

= 他のプラグインとの連携 =
* [WooCommerce](https://wordpress.org/plugins/woocommerce/) が必要です。

= 請求書 =
* 2023年10月からの日本のインボイス制度に対応。
* 個別の登録番号の登録と表示
* 適格請求書（注文状況進行中、注文状況完了済み、の際に請求書としてメールへ PDF として添付し送信）
* 適格返還請求書（払戻の際に払戻明細書としてメールへ PDF として添付し送信）
* クーポンによる割引に対応
* 送料に対応

= ライブラリ =
* [TCPDF](https://github.com/tecnickcom/tcpdf/).

= 動作 =
[youtube https://youtu.be/Qte0pZ-Fnfk]

= ライブサイト(テスト購入により動作を体験) =
* [インボイス Japan ライブサイト](https://invoicejapan.riverforest-wp.info)

= ドキュメント =
* [プラグインの概要・動作](https://blog.riverforest-wp.info/pdf-invoice-japan-for-woocommerce/)
* [独自のフォントを利用する](https://invoicejapan.riverforest-wp.info/document/)
* [テンプレートを利用して出力する PDF を変更する](https://invoicejapan.riverforest-wp.info/document/2/)
* [マーケットプレイス型のサイト対応とその他のフィルター](https://invoicejapan.riverforest-wp.info/document/3/)

== Installation ==

1. `/wp-content/plugins/` ディレクトリ以下に `pdf-invoice-japan-for-woocommerce` ディレクトリをアップロードします。
2. WordPress の「プラグイン」メニューからプラグインを有効化してください

== Frequently Asked Questions ==

= 「PDF Invoice Japan for WooCommerce」プラグインは無料ですか？ =
* はい、このプラグインは [WordPress プラグインディレクトリ](https://ja.wordpress.org/plugins/)を通じて無料で入手できます。追加機能が必要な場合は、開発者が提供する有料のアップグレードオプションがあります。

= このプラグインを使ってインボイスをカスタマイズできますか？ =
* はい、プラグインにはインボイスのテンプレートをカスタマイズするための様々なフックが用意されています。住所、注文情報など、表示したい情報を追加または削除できます。
* カスタマイズの為の[ドキュメント](https://invoicejapan.riverforest-wp.info/document/)。

= インボイスはどのようにして顧客に送信されますか？ =
* インボイスは PDF 形式で自動生成され、注文が完了すると同時に顧客のメールアドレスに添付ファイルとして送信されます。また、送信タイミングは、設定画面で設定が可能です。さらに、顧客は自分のアカウントページからもインボイスを再送できます。

= 法的要件に基づいてインボイスを発行するために必要な情報をすべて含めることができますか？ =
* はい、このプラグインは、日本の法的要件に準拠したインボイスを作成するために必要なフィールドをサポートしています。必要に応じて、消費税率の設定など、特定の法的要件に合わせて設定することが可能です。

= プラグインが正しく動作しない場合、どうすればいいですか？ =
* プラグインが期待通りに動作しない場合は、まずプラグインと [WordPress](https://ja.wordpress.org/) 本体、および [WooCommerce](https://ja.wordpress.org/plugins/woocommerce/) が最新バージョンに更新されていることを確認してください。問題が解決しない場合は、プラグインの[サポートフォーラム](https://wordpress.org/support/plugin/pdf-invoice-japan-for-woocommerce/)を利用して質問を投稿してください。

= 設定画面はどこにありますか？ =
* ダッシュボードの「WooCommerce」→「Invoice Japan」にて設定できます。

== Screenshots ==

1. 適格請求書（請求書）
2. 適格返還請求書（払戻明細書）
3. 設定
4. 管理画面からの再送信
5. マイページからの再送信

== Changelog ==

= [2.06] 2024/07/08 =
* 修正 - 割引がある場合の、送料の取り扱いについて。
* 修正 - 割引がある場合の、払戻明細書の場合に割引の表記を削除しました。

= [2.05] 2024/07/08 =
* 修正 - 割引がある場合の、割引後の軽減税率の計算について。
* 修正 - 割引がある場合の、テンプレートの割引後の価格を税込み価格にしました。

= [2.04] 2024/07/06 =
* 修正 - 割引がある場合の、送料の取り扱いについて。
* 修正 - 端数処理（四捨五入・切り上げ・切り捨て）の問題。

= [2.03] 2024/05/08 =
* 追加 - 設定画面に端数処理（四捨五入・切り上げ・切り捨て）を追加しました。

= [2.02] 2024/04/23 =
* 追加 - 顧客名のフィルターを追加しました。

= [2.01] 2024/03/16 =
* 修正 - バーチャル商品が混在する際の送料の出力の問題。
* 追加 - テンプレートファイルをより簡単にするために、関数を多数追加しました。
* 廃止 - 設定画面の、「請求先・配送先住所の配置」

= [2.00] 2024/03/15 =
* 追加 - テンプレートファイルによる PDF の出力に対応しました。
* 調整 - 一部関数を分離しました。

= [1.40] 2024/03/09 =
* 追加 - メールの文言に、「注文状況」を追加しました。
* 微調整 - 管理画面、「状態」を「注文状況」へ変更しました。

= [1.39] 2024/03/09 =
* 修正 - 不課税商品の売り上げが無い場合の非表示に対応しました。

= [1.38] 2024/02/25 =
* 追加 - 不課税に対応。不課税の場合は、「商品->商品データ->課税ステータス->なし」とする。
* 微調整 - readme.txt の調整。

= [1.37] 2024/02/22 =
* 修正 - マイアカウントページでの再送信ボタンの有無をメール送信のタイミングに連動。
* 微調整 - マイアカウントページの再送信のボタン周りのデザイン。

= [1.36] 2024/02/21 =
* 追加 - WordPress 6.5 からのプラグイン間の依存関係に対応しました。
* 修正 - マイアカウントページの再送信の仕組みを、php フォームから、React へ変更しました。

= [1.35] 2024/02/13 =
* 追加 - バーチャル商品の場合に送料欄を非表示にするようにしました。
* 微調整 - 「再送」を「再送信」としました。

= [1.34] 2024/02/11 =
* 修正 - 注文日、払戻日を、発行日（PDF生成日）から、実際の注文日時、払戻日時へ。
* 修正 - 注文日、払戻日を、注文日時、払戻日時へ。
* 追加 - 発行日時。

= [1.33] 2024/02/10 =
* 追加 - 請求書と払戻明細書を、注文者マイページの注文詳細ページから再送する機能。

= 1.32 =
json_encode を wp_json_encode へ変更しました。

= 1.31 =
WooCommerce 標準のメール送信者オプションに対応しました。
メールを顧客・管理者それぞれ個別に送信するようにしました。

= 1.30 =
請求書と払戻明細書を注文画面から再送する機能を追加しました。
手数料の別名を設定できるようになりました。

= 1.29 =
手数料の消費税が0円の時に、非課税と出力するようにしました。

= 1.28 =
手数料が出力できるようになりました。

= 1.27 =
メールヘッダーを、店舗サイト名・販売者のメールアドレスで出力するようにしました。
マーケットプレイス型サイト運用に対応するために、メールヘッダーの店舗サイト名を販売者単位で変更できるフィルター 'invoice_japan_{order(注文)か、refund(払い戻し)}_mail_headers_fromname' を用意しました。

= 1.26 =
WooCommerce がインストールされていないか、無効化されているサイトで、「有効化」の際に起きる問題を修正しました。

= 1.25 =
不要なフォントファイルを削除しました。

= 1.24 =
プラグインが読み込まれない問題を修正しました。

= 1.23 =
WooCommerce がインストールされていないか、無効化されているサイトで、「有効化」の際に起きる問題を修正しました。

= 1.22 =
フォントディレクトリ(fonts)を作成しました。
フォントディレクトリ(fonts)内に各フォントのライセンスを明記しました。
独自のフォントを追加できる、invoice_japan_pdf_font フィルターを追加しました。

= 1.21 =
小塚フォントを廃止しました。
アドオンに関する修正をしました。
請求先住所が無い場合に、請求先住所欄に請求先氏名が表示される不具合を修正しました。

= 1.20 =
デフォルトフォントをIPAexゴシックにしました。
次の2フォントを追加しました。（源真ゴシック Medium、あおぞら明朝 Medium）

= 1.19 =
マーケットプレイス型サイト運用に対応するために、一部のフィルターを対応させ、幾つかのフィルターを追加しました。readme.txt か、[プラグインページ](https://ja.wordpress.org/plugins/pdf-invoice-japan-for-woocommerce/)をご覧ください。

= 1.18 =
マーケットプレイス型サイト運用に対応するために、一部のフィルターを対応させ、幾つかのフィルターを追加しました。readme.txt か、[プラグインページ](https://ja.wordpress.org/plugins/pdf-invoice-japan-for-woocommerce/)をご覧ください。

= 1.17 =
マーケットプレイス型サイト運用に対応するために、一部のフィルターを対応させ、幾つかのフィルターを追加しました。readme.txt か、[プラグインページ](https://ja.wordpress.org/plugins/pdf-invoice-japan-for-woocommerce/)をご覧ください。

= 1.16 =
インボイス番号のフィルターを追加しました。
通知メールをサイト管理者への通知から販売者への通知へ変更しました。

= 1.15 =
IPAex フォントを追加し、不要なフォントオプションを削除しました。

= 1.14 =
決済方法毎に「備考」の「注文」と「払い戻し」を指定できるようになりました。
決済方法毎に払い戻しの際の「払戻方法」を指定できるようになりました。

= 1.13 =
決済方法毎に「備考」を指定できるようになりました。

= 1.12 =
請求先・配送先住所、備考欄を関数化しました。

= 1.11 =
備考欄を追加しました。

= 1.10 =
請求先・配送先住所の配置を明細の前後どちらかに設定できるようにしました。
[Japanized for WooCommerce](https://ja.wordpress.org/plugins/woocommerce-for-japan/)の「銀行振込 (日本国内向け)」「郵便振替」の口座詳細を、「支払い先」として、PDF に出力するようにしました。

= 1.09 =
ライブラリ[TCPDF](https://github.com/tecnickcom/tcpdf/)を更新しました。
表示を若干変更しました。

= 1.08 =
決済方法の有効・無効時に「メール送信のタイミング」が追随しない問題を修正しました。

= 1.07 =
決済方法毎に「メール送信のタイミング」を指定できるようになりました。
「支払い待ち」と「保留中」が入れ替わっていたのを正常な状態に戻しました。

= 1.06 =
「メール送信のタイミング」の設定項目を追加しました。

= 1.05 =
高パフォーマンス注文ストレージ (COT)に対応しました。

= 1.04 =
アドオンの為のコードを追加しました。

= 1.03 =
不要なコードを除去しました。

= 1.02 =
店舗情報の生成を html 生成時では無く、html 生成前に修正しました。
'invoice_japan_pdf_write' フィルターの中での戻り値に、bool 値を指定する仕様にしました。
readme.txt を修正しました。

= 1.01 =
インストール時の不具合を修正しました。

= 1.00 =
初回リリース。

== Upgrade Notice ==

= 1.00 =
初回リリース。

